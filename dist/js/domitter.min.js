/*
 Copyright (c) 2018 tikubonn
 Released under the MIT License.
 https://opensource.org/licenses/mit-license.php
*/
(function(){function z(b){b.b.style.width=null==b.h?"auto":b.h+"px";b.b.style.height=null==b.j?"auto":b.j+"px"}function l(b,c){return b.l[c]}function A(b,c){b.b.push(c);b.o.push(0);b.i.push(0);b.u.push(0);b.m.push(0);b.v.push(0);b.w.push(0);b.h.push(0);b.j.push(0);b.s.push(0);b.l.push(0)}function B(){return{b:[],o:[],i:[],u:[],m:[],v:[],w:[],h:[],j:[],s:[],l:[]}}function u(b){return{b:b,M:!1,o:0,i:0,u:0,m:0,v:0,w:0,h:0,j:0,s:0,l:0}}function v(b,c){if(b=c.fontSize.match(/([0-9]+(?:\.[0-9]+)?)px/))return parseFloat(b[1]);
throw Error("unsupported font-size value of "+c.fontSize+".");}function C(b){var c=b.b.getBoundingClientRect();b.o=c.top+window.scrollY;b.i=c.left+window.scrollX;b.u=c.right+window.scrollX;b.m=c.bottom+window.scrollY;b.h=c.right-c.left;b.j=c.bottom-c.top;b.v=b.b.clientWidth;b.w=b.b.clientHeight;c=window.getComputedStyle(b.b);var d=c.lineHeight.match(/([0-9]+(?:\.[0-9]+)?)px/);if(d)d=parseFloat(d[1]),c=v(b,c),b.s=d,b.l=(d-c)/2;else if(d=c.lineHeight.match(/([0-9]+(?:\.[0-9]+)?)(?:em)?/))d=parseFloat(d[1]),
c=v(b,c),d*=c,b.s=d,b.l=(d-c)/2;else if(c.lineHeight.match(/normal/))console.warn('interpreted "normal" of line-height value to 1.2, because its real size cannot be get from script.'),d=1.2,c=v(b,c),d*=c,b.s=d,b.l=(d-c)/2;else throw Error("unsupported line-height value of "+c.lineHeight+".");b.M=!0}function n(b,c){return{J:b,B:c}}function w(b,c){if(b=c.fontSize.match(/([0-9]+(?:\.[0-9]+)?)px/))return parseFloat(b[1]);throw Error("unsupported font-size value of "+c.fontSize+".");}function m(b){return b.b.length}
function D(b){var c=document.createElement("span");b=document.createTextNode(b);c.classList.add("domitter-character");c.appendChild(b);return c}function x(b,c){b.b[c].classList.remove("domitter-character-hidden")}function p(b,c){b.b[c].classList.add("domitter-character-hidden")}function E(b){for(var c=0,d=m(b);c<d;){if(b.b[c].classList.contains("domitter-character-hidden"))return n(0,c);c=c+1|0}return n(0,d)}function F(b){for(var c=m(b),d=c;0<d;)if(d=d-1|0,0==b.b[d].classList.contains("domitter-character-hidden"))return n(d+
1,c);return n(0,c)}function G(b){var c=document.createElement("span");b=document.createTextNode(b);c.classList.add("domitter-ellipsis");c.appendChild(b);return u(c)}function H(b){b.b.style.top=b.o+"px";b.b.style.left=b.i+"px"}function q(b){b.b.classList.add("domitter-ellipsis-hidden")}function r(){}function t(b){if(1>b)throw Error("arguments value must be more than 1.");this.a=b}function y(b){if(0>b)throw Error("argument value must be more than 0.");this.a=b}function f(b,c,d,e){if(window.jQuery&&
b instanceof window.jQuery){b=b.U();if(0==b.length)throw Error("took an empty jQuery object.");b=b[0]}if("number"==typeof c||c instanceof Number)c=new t(c);if(void 0==d)d=G("...");else if("string"==typeof d||d instanceof String)d=G(d.toString());void 0==e&&(e={});this.C=b;this.O=c;this.a=d;this.A=e;this.c=this.f=null;this.g=!1;this.P()}function k(b,c,d,e){void 0==b?b=[]:b instanceof Array?b=Array.prototype.slice.call(b).map(function(b){return b instanceof f?b:new f(b,c,d,e)}):b instanceof NodeList||
b instanceof HTMLCollection?b=Array.prototype.slice.call(b).map(function(b){return new f(b,c,d,e)}):window.a&&b instanceof window.a&&(b=b.U().map(function(b){return new f(b,c,d,e)}));void 0==e&&(e={});this.a=b;this.g=e}window.domitterCharacterDom=function(b){return b.b};window.domitterCharacterTop=function(b){return b.o};window.domitterCharacterLeft=function(b){return b.i};window.domitterCharacterRight=function(b){return b.u};window.domitterCharacterBottom=function(b){return b.m};window.domitterCharacterInnerWidth=
function(b){return b.v};window.domitterCharacterInnerHeight=function(b){return b.w};window.domitterCharacterOuterWidth=function(b){return b.h};window.domitterCharacterOuterHeight=function(b){return b.j};window.hideDomitterCharacter=function(b){b.b.classList.add("domitter-character-hidden")};window.showDomitterCharacter=function(b){b.b.classList.remove("domitter-character-hidden")};window.hidepDomitterCharacter=function(b){return b.b.classList.contains("domitter-character-hidden")};window.showpDomitterCharacter=
function(b){return 0==b.b.classList.contains("domitter-character-hidden")};window.domitterCharacterCollectionLength=m;window.domitterCharacterCollectionDom=function(b,c){return b.b[c]};window.domitterCharacterCollectionTop=function(b,c){return b.o[c]};window.domitterCharacterCollectionLeft=function(b,c){return b.i[c]};window.domitterCharacterCollectionRight=function(b,c){return b.u[c]};window.domitterCharacterCollectionBottom=function(b,c){return b.m[c]};window.domitterCharacterCollectionInnerWidth=
function(b,c){return b.v[c]};window.domitterCharacterCollectionInnerHeight=function(b,c){return b.w[c]};window.domitterCharacterCollectionOuterWidth=function(b,c){return b.h[c]};window.domitterCharacterCollectionOuterHeight=function(b,c){return b.j[c]};window.domitterCharacterCollectionLineHeight=function(b,c){return b.s[c]};window.domitterCharacterCollectionLineMargin=l;window.showDomitterCharacterCollection=l;window.hideDomitterCharacterCollection=l;window.showpDomitterCharacterCollection=l;window.hidepDomitterCharacterCollection=
l;window.showsDomitterCharacterCollection=l;window.hidesDomitterCharacterCollection=l;r.prototype.omit=function(){throw Error(".omit method was not defined.");};window.DomitterOmissioner=r;t.prototype=Object.create(r.prototype);t.prototype.omit=function(b){var c=m(b);if(0<c)for(var d=1,e=this.a,f=b.i[0];d<c;)b.i[d]<f&&0<e&&e--,0<e?x(b,d):p(b,d),f=b.i[d],d=d+1|0};window.DomitterLines=t;y.prototype=Object.create(r.prototype);y.prototype.omit=function(b){for(var c=m(b),d=0;d<c;)b.m[d]<this.a?x(b,d):
p(b,d),d=d+1|0};window.DomitterHeight=y;f.prototype.omitp=function(){return this.g};f.prototype.unomitp=function(){return 0==this.g};f.prototype.N=function(b,c){c instanceof Text?this.S(b,c):c instanceof Node&&this.R(b,c)};f.prototype.S=function(b,c){var d=document.createElement("span");d.classList.add("domitter");d=u(d);var e=B(),f=c.data,h=this.A;if(h.experiments&&h.experiments.textResolution){h=h.experiments.textResolution;for(var g=document.createDocumentFragment(),k=0;k<f.length;){var l=D(f.slice(k,
k+h));g.appendChild(l);A(e,l);k=k+1|0}d.b.appendChild(g)}else{h=document.createDocumentFragment();for(g=0;g<f.length;)k=D(f[g]),h.appendChild(k),A(e,k),g=g+1|0;d.b.appendChild(h)}b=b.c;Array.prototype.push.apply(b.b,e.b);Array.prototype.push.apply(b.o,e.o);Array.prototype.push.apply(b.i,e.i);Array.prototype.push.apply(b.u,e.u);Array.prototype.push.apply(b.m,e.m);Array.prototype.push.apply(b.v,e.v);Array.prototype.push.apply(b.w,e.w);Array.prototype.push.apply(b.h,e.h);Array.prototype.push.apply(b.j,
e.j);Array.prototype.push.apply(b.s,e.s);Array.prototype.push.apply(b.l,e.l);c.parentNode.replaceChild(d.b,c)};f.prototype.R=function(b,c){if(0==c.classList.contains("domitter")&&0==c.classList.contains("domitter-character")&&0==c.classList.contains("domitter-ellipsis"))for(var d=0;d<c.childNodes.length;)this.N(b,c.childNodes[d]),d=d+1|0};f.prototype.T=function(b,c){for(var d=b.childNodes.length,e=document.createDocumentFragment();d;)d=d-1|0,e.appendChild(b.firstChild);c.appendChild(e)};f.prototype.P=
function(){var b=document.createElement("div");b.classList.add("domitter");b={f:u(b),c:B()};this.N(b,this.C);this.f=b.f;this.c=b.c;this.T(this.C,b.f.b);b.f.b.appendChild(this.a.b);this.C.appendChild(b.f.b);q(this.a)};f.prototype.D=function(){C(this.a);C(this.f);for(var b=this.c,c=0,d=m(b);c<d;){var e=b,f=c,h=e.b[f],g=h.getBoundingClientRect();e.o[f]=g.top;e.i[f]=g.left;e.u[f]=g.right;e.m[f]=g.bottom;e.v[f]=h.clientWidth;e.w[f]=h.clientHeight;e.h[f]=g.right-g.left;e.j[f]=g.bottom-g.top;e=b;f=c;h=window.getComputedStyle(e.b[f]);
if(g=h.lineHeight.match(/([0-9]+(?:\.[0-9]+)?)px/))g=parseFloat(g[1]),h=w(e,h),e.s[f]=g,e.l[f]=(g-h)/2;else if(g=h.lineHeight.match(/([0-9]+(?:\.[0-9]+)?)(?:em)?/))g=parseFloat(g[1]),h=w(e,h),g*=h,e.s[f]=g,e.l[f]=(g-h)/2;else if(h.lineHeight.match(/normal/))console.warn('interpreted "normal" of line-height value to 1.2, because its real size cannot be get from script.'),g=1.2,h=w(e,h),g*=h,e.s[f]=g,e.l[f]=(g-h)/2;else throw Error("unsupported line-height value of "+h.lineHeight+".");c=c+1|0}b.M=!0};
f.prototype.F=function(){this.O.omit(this.c);this.W();this.V();this.g=!0};f.prototype.W=function(){var b=F(this.c);if(0==b.B-b.J)q(this.a);else{var c=E(this.c);if(0==c.B-c.J)q(this.a);else for(this.a.b.classList.remove("domitter-ellipsis-hidden"),b=c.B,c=c.J;c<b;)if(b=b-1|0,/\s+/.test(this.c.b[b].data))p(this.c,b);else if(this.a.h<=this.f.i+this.f.v-this.c.u[b]){c=this.a;var d=this.c.m[b]+this.c.l[b]-this.f.o;c.m=d;c.o=d-c.j;c=this.a;b=this.c.u[b]-this.f.i;c.i=b;c.u=b+c.h;break}else p(this.c,b)}this.g=
!0};f.prototype.V=function(){var b=F(this.c);if(0==b.B-b.J)this.f.h=null,this.f.j=null;else{var c=E(this.c);if(0==c.B-c.J)this.f.h=null,this.f.j=null;else{b=1;var d=c.B;for(c=this.c.m[0]+this.c.l[0];b<d;)c=Math.max(c,this.c.m[b]+this.c.l[b]),b=b+1|0;b=this.f.o;this.f.h=null;this.f.j=c-b}}this.g=!0};f.prototype.G=function(){H(this.a);z(this.f);this.g=!0};f.prototype.K=function(){this.D();this.F();this.G()};f.prototype.omit=function(){this.A.experiments&&this.A.experiments.useRequestAnimationFrame?
requestAnimationFrame(this.K.bind(this)):this.K()};f.prototype.H=function(){q(this.a);for(var b=this.c,c=0,d=m(b);c<d;)x(b,c),c=c+1|0;this.f.h=null;this.f.j=null;this.g=!1};f.prototype.I=function(){H(this.a);z(this.f);this.g=!1};f.prototype.L=function(){this.H();this.I()};f.prototype.unomit=function(){this.A.experiments&&this.A.experiments.useRequestAnimationFrame?requestAnimationFrame(this.L.bind(this)):this.L()};f.prototype.toggle=function(){this.omitp()?this.unomit():this.omit()};f.prototype.update=
function(){this.omitp()?this.omit():this.unomit()};window.Domitter=f;k.prototype.D=function(){for(var b=0;b<this.a.length;)this.a[b].D(),b=b+1|0};k.prototype.F=function(){for(var b=0;b<this.a.length;)this.a[b].F(),b=b+1|0};k.prototype.G=function(){for(var b=0;b<this.a.length;)this.a[b].G(),b=b+1|0};k.prototype.A=function(){this.D();this.F();this.G()};k.prototype.omit=function(){this.g.experiments&&this.g.experiments.useRequestAnimationFrame?requestAnimationFrame(this.A.bind(this)):this.A()};k.prototype.H=
function(){for(var b=0;b<this.a.length;)this.a[b].H(),b=b+1|0};k.prototype.I=function(){for(var b=0;b<this.a.length;)this.a[b].I(),b=b+1|0};k.prototype.C=function(){this.H();this.I()};k.prototype.unomit=function(){this.g.experiments&&this.g.experiments.useRequestAnimationFrame?requestAnimationFrame(this.C.bind(this)):this.C()};k.prototype.L=function(){for(var b=0;b<this.a.length;)this.a[b].omitp()&&this.a[b].D(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].omitp()&&this.a[b].F(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].unomitp()&&
this.a[b].H(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].omitp()&&this.a[b].G(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].unomitp()&&this.a[b].I(),b=b+1|0};k.prototype.update=function(){this.g.experiments&&this.g.experiments.useRequestAnimationFrame?requestAnimationFrame(this.L.bind(this)):this.L()};k.prototype.K=function(){for(var b=0;b<this.a.length;)this.a[b].unomitp()&&this.a[b].D(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].unomitp()&&this.a[b].F(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].omitp()&&
this.a[b].H(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].unomitp()&&this.a[b].G(),b=b+1|0;for(b=0;b<this.a.length;)this.a[b].omitp()&&this.a[b].I(),b=b+1|0};k.prototype.toggle=function(){this.g.experiments&&this.g.experiments.useRequestAnimationFrame?requestAnimationFrame(this.K.bind(this)):this.K()};window.Domitters=k})();
